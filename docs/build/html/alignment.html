
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Alignment &#8212; smtools 0.3.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="curtains" href="curtains.html" />
    <link rel="prev" title="point_fitting" href="point_fitting.html" /> 
  </head>
  <body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">smtools 0.3.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="point_fitting.html" title="point_fitting"
             accesskey="P">previous</a> |
          <a href="curtains.html" title="curtains"
             accesskey="N">next</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="alignment">
<h1>Alignment<a class="headerlink" href="#alignment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="aligning-images">
<h2>aligning images<a class="headerlink" href="#aligning-images" title="Permalink to this headline">¶</a></h2>
<p>The <cite>smtools.algnment</cite> module is designed to align images that were split
into separate channels during data collection. It relies on using
fluorescent particles that appear in both channels. To see how it works
see our walkthrough <a class="reference external" href="https://github.com/ReddingLab/Learning/blob/master/image-analysis-basics/4__Image-alignment-with-toolbox.ipynb">here</a> . Also <a class="reference external" href="https://github.com/ReddingLab/Learning/blob/master/image-analysis-basics/2__finding-local-maxima.ipynb">finding maxima</a> and <a class="reference external" href="https://github.com/ReddingLab/Learning/blob/master/image-analysis-basics/3__fitting-gaussians.ipynb">fitting gaussians</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="kn">as</span> <span class="nn">test</span>
<span class="kn">import</span> <span class="nn">smtools.alignment</span> <span class="kn">as</span> <span class="nn">al</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">params</span> <span class="o">=</span> <span class="n">al</span><span class="o">.</span><span class="n">inspect_global_fit</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">(),</span> <span class="n">showplot</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">im_old</span> <span class="o">=</span> <span class="n">al</span><span class="o">.</span><span class="n">overlay</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="n">im_adj_image</span> <span class="o">=</span> <span class="n">al</span><span class="o">.</span><span class="n">align_by_offset</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
<span class="n">im_new</span> <span class="o">=</span> <span class="n">al</span><span class="o">.</span><span class="n">overlay</span><span class="p">(</span><span class="n">im_adj_image</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Original Image&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="s2">&quot;18&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Aligned Image&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="s2">&quot;18&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im_old</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im_new</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/alignment.png"><img alt="_images/alignment.png" src="_images/alignment.png" style="width: 800px;" /></a>
</div>
<div class="section" id="module-alignment">
<span id="alignment-module"></span><h2>Alignment module<a class="headerlink" href="#module-alignment" title="Permalink to this headline">¶</a></h2>
<p>The alignment module contains functions used in aligning two channel
data with fluorescent dyes. See our <a class="reference external" href="https://github.com/ReddingLab/Learning/blob/master/image-analysis-basics/Image-alignment-with-toolbox.ipynb/">walkthrough</a>
of the alignment module’s usage.</p>
<dl class="function">
<dt id="alignment.get_offset_distribution">
<code class="descclassname">alignment.</code><code class="descname">get_offset_distribution</code><span class="sig-paren">(</span><em>Image</em>, <em>bbox=9</em>, <em>splitstyle='hsplit'</em>, <em>fsize=10</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.get_offset_distribution" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>This function in order:</dt>
<dd><ul class="first last simple">
<li>splits the image into channels</li>
<li>locates and fits all of the points in each channel</li>
<li>pairs up associated points from each channel, uses cDKTree</li>
<li>and determines their offset</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Image</strong> – 2D image array</li>
<li><strong>bbox</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.fit_routine</span></code>,
size of ROI around each point to apply gaussian fit. Default
is 9.</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; accepts
“hsplit”, “vsplit”. Default is “hsplit”</li>
<li><strong>fsize</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.find_maxima</span></code>,
size of average filters used in maxima determination. Default
is 10.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Two lists containing all of the measured x- and y- offsets</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">get_offset_distribution</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x_dist</span><span class="p">,</span> <span class="n">y_dist</span> <span class="o">=</span> <span class="n">get_offset_distribution</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">x_dist</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y_dist</span><span class="p">))</span>
<span class="go">-1.9008888233326608 -2.042675546813981</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alignment.plot_assigned_maxima">
<code class="descclassname">alignment.</code><code class="descname">plot_assigned_maxima</code><span class="sig-paren">(</span><em>Image</em>, <em>splitstyle='hsplit'</em>, <em>fsize=10</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.plot_assigned_maxima" title="Permalink to this definition">¶</a></dt>
<dd><p>This function spits out a matplotlib plot with lines drawn
between each of the assigned pairs of maxima.
The purpose of this function is more for a sanity check than
anything useful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Image</strong> – 2D image array</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; accepts
“hsplit”, “vsplit”. Default is “hsplit”</li>
<li><strong>fsize</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.find_maxima</span></code>,
size of average filters used in maxima determination. Default
is 10.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">fancy plot of assigned points.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">plot_assigned_maxima</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_assigned_maxima</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alignment.inspect_global_fit">
<code class="descclassname">alignment.</code><code class="descname">inspect_global_fit</code><span class="sig-paren">(</span><em>im_stack</em>, <em>bbox=9</em>, <em>fsize=10</em>, <em>binwidth=0.1</em>, <em>init_params=None</em>, <em>splitstyle='hsplit'</em>, <em>showplot=True</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.inspect_global_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic alignment function. Accepts a 1D list of image arrays,
then splits the images, locates corresponding maxima in each
channel and then calculates the best shift in x and y to align
each maxima pair. If showplot is set to True, this function also
produces a pair of histograms of all the measured offsets and
resulting fits to those data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im_stack</strong> – 1D list of image arrays to be used in
determination of the offset</li>
<li><strong>bbox</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.fit_routine</span></code>,
size of ROI around each point to apply gaussian fit. Default
is 9.</li>
<li><strong>fsize</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.find_maxima</span></code>,
size of average filters used in maxima determination. Default
is 10.</li>
<li><strong>binwidth</strong> – float, passed to <code class="docutils literal"><span class="pre">make_bins</span></code>; resolution of
histogram for fitting</li>
<li><strong>init_params</strong> – 1D array, initial conditions passed to
scipy.optimize.curve_fit. must be length 5,
p0 = [loc, scale, shape, amplitude, baseline]</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; orientation
of channels, vertical or horizontal</li>
<li><strong>showplot</strong> – bool, if True, will generate a plot of the
distribution and fit</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple containing optimal parameters and covariance
matrix from fit. (popt_x, pcov_x, popt_y, pcov_y)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">inspect_global_fit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="n">inspect_global_fit</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">params</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="go">5.612082237088681 -2.651765063702885</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alignment.inspect_individual_fits">
<code class="descclassname">alignment.</code><code class="descname">inspect_individual_fits</code><span class="sig-paren">(</span><em>im_stack</em>, <em>bbox=9</em>, <em>fsize=10</em>, <em>binwidth=0.1</em>, <em>init_params=None</em>, <em>splitstyle='hsplit'</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.inspect_individual_fits" title="Permalink to this definition">¶</a></dt>
<dd><p>This function provides a method to plot each individual offset
distributions of images passed to the function. Common usage is
to get a sense of how similar groups of images are.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>im_stack</strong> – 1D list of image arrays to be used in
determination of the offset</li>
<li><strong>bbox</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.fit_routine</span></code>,
size of ROI around each point to apply gaussian fit. Default
is 9.</li>
<li><strong>fsize</strong> – int, passed to <code class="docutils literal"><span class="pre">point_fitting.find_maxima</span></code>,
size of average filters used in maxima determination. Default
is 10.</li>
<li><strong>binwidth</strong> – float, passed to <code class="docutils literal"><span class="pre">make_bins</span></code>; resolution of
histogram for fitting</li>
<li><strong>init_params</strong> – 1D array, initial conditions passed to
scipy.optimize.curve_fit. must be length 5,
p0 = [loc, scale, shape, amplitude, baseline]</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; orientation
of channels, vertical or horizontal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">produces a plot of histograms and fits for each
individual image passed in im_stack. Also returns list of tuples,
each contains optimal parameters and covariance matrix from
fit. If no fit was found, returns an empty list. The lists
alternate between x and y-offset fits.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">inspect_individual_fits</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="n">inspect_individual_fits</span><span class="p">(</span><span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">())</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alignment.align_by_offset">
<code class="descclassname">alignment.</code><code class="descname">align_by_offset</code><span class="sig-paren">(</span><em>Image</em>, <em>shift_x</em>, <em>shift_y</em>, <em>splitstyle='hsplit'</em>, <em>shift_channel=1</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.align_by_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>This function shifts one channel of the array based supplied
offset values. Retains the single image structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Image</strong> – 2D image array</li>
<li><strong>shift_x</strong> – float, offset in x</li>
<li><strong>shift_y</strong> – float, offset in y</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; accepts
“hsplit”, “vsplit”. Default is “hsplit”</li>
<li><strong>shift_channel</strong> – int, which channel to shift by offsets,
default is channel 1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">2D image array of aligned image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">find_global_offset</span><span class="p">,</span>
<span class="go">align_by_offset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">find_global_offset</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_image</span> <span class="o">=</span> <span class="n">align_by_offset</span><span class="p">(</span><span class="n">im</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">new_image</span><span class="p">),</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alignment.overlay">
<code class="descclassname">alignment.</code><code class="descname">overlay</code><span class="sig-paren">(</span><em>Image</em>, <em>splitstyle='hsplit'</em>, <em>rot=True</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="headerlink" href="#alignment.overlay" title="Permalink to this definition">¶</a></dt>
<dd><p>Overlays the two channels derived from Image. Converts Image to
an 8-bit RGB array, with one channel colored magenta and the
other green.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Image</strong> – 2D image array</li>
<li><strong>splitstyle</strong> – string, passed to <code class="docutils literal"><span class="pre">im_split</span></code>; accepts
“hsplit”, “vsplit”. Default is “hsplit”</li>
<li><strong>rot</strong> – bool, if True, image is rotated 90 degrees</li>
<li><strong>invert</strong> – bool, if True, inverts the channel color assignment.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">8-bit RGB image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">smtools.alignment</span> <span class="k">import</span> <span class="n">overlay</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">smtools.testdata</span> <span class="k">as</span> <span class="nn">test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">image_stack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">find_global_offset</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aligned_image</span> <span class="o">=</span> <span class="n">align_by_offset</span><span class="p">(</span><span class="n">im</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">overlayed</span> <span class="o">=</span> <span class="n">overlay</span><span class="p">(</span><span class="n">aligned_image</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">overlayed</span><span class="p">),</span> <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <p class="caption"><span class="caption-text">PACKAGE CONTENTS:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="point_fitting.html">point_fitting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="curtains.html">curtains</a></li>
<li class="toctree-l1"><a class="reference internal" href="stacks.html">Stacks Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_module.html">Misc Module</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="point_fitting.html" title="point_fitting"
              >previous</a> |
            <a href="curtains.html" title="curtains"
              >next</a> |
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/alignment.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Redding Lab, UCSF.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>